<!doctype html>
<html lang="ru">
<head><meta charset="utf-8"><title>TG Test</title></head>
<body>
  <h1>Telegram Login Test</h1>
  <div id="tg-root"></div>
  <script>
    const BOT = (new URLSearchParams(location.search).get('bot') || 'IPS_TheRightMove_bot').replace(/^@/,'');
    const s = document.createElement('script');
    s.async = true;
    s.src = 'https://telegram.org/js/telegram-widget.js?22';
    s.setAttribute('data-telegram-login', BOT);
    s.setAttribute('data-size', 'large');
    s.setAttribute('data-request-access', 'write');
    s.setAttribute('data-lang', 'ru');
    s.setAttribute('data-auth-url', location.origin + '/auth/telegram/callback?state=test&return_to=%2Fdashboard');
    document.getElementById('tg-root').appendChild(s);
    console.log('origin=', location.origin, 'bot=', BOT);
  </script>
</body>
</html>
